<!DOCTYPE html>

<html>
<head>
	<meta charset="utf-8">
	<title>MyConnectome Data Browser</title>
        <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script type='text/javascript' src='https://s3.amazonaws.com/dynatable-docs-assets/js/jquery.dynatable.js'></script>

  <script>
      $(document).ready( function() {
        $('#tabley').bind('dynatable:init', function(e, dynatable) {
      dynatable.queries.functions['thresh-search'] = function(record, queryValue) {
       return parseFloat(record.pvalue.replace(/,/,'')) <= parseFloat(queryValue);
      };
    }).dynatable({
           table: {
             defaultColumnIdStyle: 'trimDash'
           },
       inputs: {
        queries: $('#thresh-search')
      }
        });
      });
    </script>

        <link rel="stylesheet" media="all" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />

	<style>
@import 'http://fonts.googleapis.com/css?family=Lato:400,300,700,900';blockquote,body,code,dd,div,dl,dt,fieldset,form,h1,h2,h3,h4,h5,h6,input,legend,li,ol,p,pre,td,textarea,th,ul{margin:0;padding:0}fieldset,img{border:0}address,caption,dfn,th,var{font-style:normal;font-weight:400}li{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%}body{background:url(https://raw.githubusercontent.com/vsoch/myconnectome-vm/update/flask/assets/img/bg.jpg);font-family:Lato,sans-serif;font-weight:300;font-size:16px;color:#555;line-height:1.6em;-webkit-font-smoothing:antialiased;-webkit-overflow-scrolling:touch}h1,h2,h3,h4,h5,h6{font-family:Lato,sans-serif;font-weight:300;color:#444}p{font-size:16px}a{word-wrap:break-word;-webkit-transition:color .1s ease-in,background .1s ease-in;-moz-transition:color .1s ease-in,background .1s ease-in;-ms-transition:color .1s ease-in,background .1s ease-in;-o-transition:color .1s ease-in,background .1s ease-in;transition:color .1s ease-in,background .1s ease-in}a:focus,a:hover{color:#4F92AF;text-decoration:none;outline:0}a:after,a:before{-webkit-transition:color .1s ease-in,background .1s ease-in;-moz-transition:color .1s ease-in,background .1s ease-in;-ms-transition:color .1s ease-in,background .1s ease-in;-o-transition:color .1s ease-in,background .1s ease-in;transition:color .1s ease-in,background .1s ease-in}.alignleft{text-align:left}.alignright{text-align:right}.aligncenter{text-align:center}.btn{display:inline-block;padding:10px 20px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.428571429;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:0}#wrapper{text-align:center;padding:50px 0;min-height:650px;width:100%;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover}#wrapper h1{margin-top:60px;margin-bottom:40px;color:#fff;font-size:45px;font-weight:900;letter-spacing:-1px}h2.subtitle{color:#fff;font-size:24px}.logo_box{width:349px;float:left;border-right:1px solid #303030;height:600px;position:relative}h1{padding:12px 70px 12px 20px;position:absolute;right:0;text-align:left;top:25%;float:left;color:#fff;letter-spacing:-1px;font-size:38px}h1 cufon{margin-bottom:-4px}.main_box{float:left;width:500px;height:600px;padding:25px}h2{font-family:Georgia;color:#ffe400;font-size:24px;margin-bottom:10px;margin-top:20px}h2 span{color:#fff;font-size:16px;line-height:26px;font-style:italic}ul.info{width:500px;padding:0;margin:10px 0 0;float:left}ul.info li{margin-bottom:20px;clear:both;float:left}ul.info li p{font-size:13px;line-height:20px;color:#fff;float:left;margin:0}.connect{width:145px;padding-left:20px;float:left;padding-top:20px}.connect img{margin-right:5px}.links{bottom:0;position:absolute;left:-50px}.details{position:absolute;top:400px;width:97%;margin-left:20px;margin-right:20px;padding:20px;background:#fff}#main_content{padding:15px}p{margin:15px 0}a{color:#06c}#main_nav ul{position:absolute;left:40%;background:#fff;float:left;-webkit-transition:.5s;transition:.5s}#main_nav li{float:left;position:relative;width:300px;list-style:none;-webkit-transition:.5s;transition:.5s}#main_nav>ul>li>a,h1{text-transform:uppercase}#main_nav a{display:block;text-decoration:none;padding:5px 15px;color:#000}#main_nav ul ul{position:absolute;left:0;top:100%;visibility:hidden;opacity:0}#main_nav ul ul ul{left:100%;top:0}#main_nav li:hover,#main_nav li:hover li{background:#ddd}#main_nav li li:hover,#main_nav li li:hover li{background:#bbb}#main_nav li li li:hover{background:#999}#main_nav li:hover>ul{visibility:visible;opacity:1}
	</style>

	<!--[if lt IE 9]><script src="/r10/html5shiv.js"></script><![endif]-->
        <link rel="stylesheet" media="all" href="https://s3.amazonaws.com/dynatable-docs-assets/css/jquery.dynatable.css" />
</head>

<body>

<h1 style='text-transform:none;position:absolute;left:33%;top:10px;'>MyConnectome Data Explorer</h1>
<div id="wrapper">

		<nav id="main_nav" style='margin-top:20px'>
			<ul>
				<li>
					<a href="">SELECT THE FIRST VARIABLE</a>
					<ul>
                                            {% for category,subcategory in dropdown.iteritems() %}
						<li><a href="">{{ lookup[category] }}</a>
                                                    <ul>
                                                        <li style="background-color:#4F92AF"><a href="#">SELECT THE SECOND VARIABLE</a></li>
                                                    {% for item in subcategory %}
                                                        <!-- Note - if deployed in subdirectory of server, you must hard code path here-->
    							<li><a href="/{{ category }}/{{ item }}">{{ lookup[item] }}</a></li>
                                                    {% endfor %}                     
                                                    </ul>
                                                </li>                
                                            {% endfor %}
					</ul>
				</li>
		</ul>
		</nav>	

{% if table is defined %}
<div class="details">	
P-Value Threshold:
  <<input id="thresh-search" type=number step=1000 />
<table id ="tabley" class="table">
  <thead>
    <tr>
      <th style="background-color:#4F92Af">x variable</th>
      <th style="background-color:#4F92Af">y variable</th>
      <th style="background-color:#4F92Af">correlation</th>
      <th style="background-color:#4F92Af">T (arima)</th>
      <th style="background-color:#4F92Af">number obs.</th>
      <th title="(BH) correction" style="background-color:#4F92Af">pvalue</th>
    </tr>
  </thead>
  <tbody>  
      {% for xvar, yvar, corval, tarima, tdrift, nobs, pval in table %}
    <tr>
      <td>{{ xvar }}</td>
      <td>{{ yvar }}</td>
      <td>{{ corval }}</td>
      <td>{{ tarima }}</td>
      <td>{{ nobs }}</td>
      <td>{{ pval }}</td>
   </tr>
      {% endfor %}
  </tbody>
</table>

</div>

</div>
{% endif %}
</body>

</html>
